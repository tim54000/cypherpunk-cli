name: Tim's rusty build

on:
  push:
    branches:
      - master
    paths:
      - '*'
      - '!/remailer-keys/*'

jobs:
  build:
    strategy:
      matrix:
        os: [macOS-10.14, windows-2016, ubuntu-18.04]
        backend: [back-gpg]
    runs-on: ${{ matrix.os }}
    steps:
      - uses: actions/checkout@v1
      - name: Build
        run: ${{ format("cargo build --verbose --release --no-default-features --features {0}", matrix.backend) }}